(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{AccessDB:()=>x,IndexedDB:()=>g,initDB:()=>S,useIndexedDB:()=>P});const t=require("react");var r=e.n(t);function o(e,n,t){e||t("You need to use the openDatabase function to create a database before you query it!"),function(e,n){return e.objectStoreNames.contains(n)}(e,n)||t("objectStore does not exists: ".concat(n))}function u(e,n){var t=e.transaction(n.storeName,n.dbMode);return t.onerror=n.error,t.oncomplete=n.complete,t.onabort=n.abort,t}function c(e,n,t,r){return{storeName:n,dbMode:e,error:function(e){t(e)},complete:function(){r()},abort:function(e){t(e)}}}function i(e,n,t,r,o,i,a){void 0===i&&(i=u),void 0===a&&(a=c);var s=i(e,a(n,t,o,r));return{store:s.objectStore(t),transaction:s}}function a(e,n,t,r){return i(e,f.readwrite,n,t,r)}function s(e,n,t,r){return i(e,f.readonly,n,t,r)}var f,l="undefined"==typeof window?{}:window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;function d(e,n,t){return new Promise((function(r,o){Object.keys(l)||o("IndexedDB not supported in this environment");var u,c=null==l?void 0:l.open(e,n);c.onsuccess=function(){u=c.result,r(u)},c.onerror=function(){o("IndexedDB error: ".concat(c.error))},"function"==typeof t&&(c.onupgradeneeded=function(e){t(e,u)})}))}function p(e,n,t){return{add:function(r,o){return new Promise((function(u,c){d(e,n).then((function(e){var n=a(e,t,u,c).store.add(r,o);n.onsuccess=function(e){o=e.target.result,u(o)},n.onerror=function(e){return c(e)}}))}))},getByID:function(r){return new Promise((function(u,c){d(e,n).then((function(e){o(e,t,c),s(e,t,u,c).store.get(r).onsuccess=function(e){u(e.target.result)}}))}))},getAll:function(){return new Promise((function(r,u){d(e,n).then((function(e){o(e,t,u);var n=s(e,t,r,u).store.getAll();n.onerror=function(e){return u(e)},n.onsuccess=function(e){var n=e.target.result;r(n)}}))}))},update:function(r,u){return new Promise((function(c,i){d(e,n).then((function(e){o(e,t,i);var n=a(e,t,c,i),s=n.transaction,f=n.store;s.oncomplete=function(e){return c(e)},f.put(r,u)}))}))},deleteRecord:function(r){return new Promise((function(u,c){d(e,n).then((function(e){o(e,t,c),a(e,t,u,c).store.delete(r).onsuccess=function(e){return u(e)}}))}))},clear:function(){return new Promise((function(r,u){d(e,n).then((function(e){o(e,t,u);var n=a(e,t,r,u),c=n.store;n.transaction.oncomplete=function(){return r()},c.clear()}))}))},openCursor:function(r,u){return new Promise((function(c,i){d(e,n).then((function(e){o(e,t,i),s(e,t,c,i).store.openCursor(u).onsuccess=function(e){r(e),c()}}))}))},getByIndex:function(r,u){return new Promise((function(c,i){d(e,n).then((function(e){o(e,t,i),s(e,t,c,i).store.index(r).get(u).onsuccess=function(e){c(e.target.result)}}))}))}}}!function(e){e.readonly="readonly",e.readwrite="readwrite"}(f||(f={}));var v=function(){return v=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},v.apply(this,arguments)},b=function(e,n,t,r){return new(t||(t=Promise))((function(o,u){function c(e){try{a(r.next(e))}catch(e){u(e)}}function i(e){try{a(r.throw(e))}catch(e){u(e)}}function a(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,i)}a((r=r.apply(e,n||[])).next())}))},h=function(e,n){var t,r,o,u,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function i(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,i[0]&&(c=0)),c;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=n.call(e,c)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},m=r().createContext({db:null,name:null,version:null}),w=m.Provider,y=m.Consumer;function g(e){var n=this,t=e.name,o=e.version,u=e.children;return e.objectStoresMeta.forEach((function(e){return b(n,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,d(t,o,(function(n){var t=n.currentTarget.result.createObjectStore(e.store,e.storeConfig);e.storeSchema.forEach((function(e){t.createIndex(e.name,e.keypath,e.options)}))}))];case 1:return n.sent(),[2]}}))}))})),r().createElement(w,{value:{db:null,name:t,version:o}},u)}function x(e){var n=e.children,t=e.objectStore;return r().createElement(y,null,(function(e){var r=e.db,o=e.name,u=e.version;return n(v({db:r},p(o,u,t)))}))}var j={version:null,name:null};function S(e){var n=e.name,t=e.version,r=e.objectStoresMeta;j.name=n,j.version=t,Object.freeze(j),function(e,n,t){if(!Object.keys(l))throw new Error("IndexedDB not supported in this environment");var r=null==l?void 0:l.open(e,n);r.onupgradeneeded=function(e){var n=e.target.result;t.forEach((function(e){if(!n.objectStoreNames.contains(e.store)){var t=n.createObjectStore(e.store,e.storeConfig);e.storeSchema.forEach((function(e){t.createIndex(e.name,e.keypath,e.options)}))}})),n.close()},r.onsuccess=function(e){e.target.result.close()}}(n,t,r)}function P(e){if(!j.name||!j.version)throw new Error("Please, initialize the DB before the use.");return(0,t.useMemo)((function(){return p(j.name,j.version,e)}),[j,e])}module.exports=n})();
//# sourceMappingURL=main.js.map